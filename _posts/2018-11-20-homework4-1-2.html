---
layout: post
title:  "Homework 4-1-2"
date:   2018-11-20 21:15:05 +0000
image: /assets/images/contact.jpg

---

<script type="text/javascript" src = "/assets/js/canvas.js"></script>


<script>
  Array.prototype.remove = function(from, to) {
    var rest = this.slice((to || from) + 1 || this.length);
    this.length = from < 0 ? this.length + from : from;
    return this.push.apply(this, rest);
  };
</script>

<script>
//Tree ADT
  function Node(data) {
    this.data = data;
    this.numChild = 0;
    this.parent = null;
    this.children = [];
  }
  function create_root(){
    var data = {id:0,name:'root',
                graphic:{x:0,y:0,width:100,height:50, color:'lightskyblue'}};
	  var root = new Node(data);

    return root;
  }
  function add_node(data, root){
	  var node = new Node(data);
    root.children.push(node);
    node.parent = root;
    root.numChild += 1;
    while(root.parent != null){
      root = root.parent;
      root.numChild += 1;
    }
  }
  //search node by id
  function search_node(node,id){
    if(node.data.id == id){
  	  return node;
    }
    else if(node.children.length > 0){
  	  var i;
      var result = null;
      for(i = 0; result == null && i < node.children.length; i ++){
    	  result = search_node(node.children[i], id);
      }
  	  return result;
    }
	  return null;
  }
  function change_node(root, id ,data){
    var node = search_node(root, id);
    if(node == null){
  	  alert('there is no node to delete');
    }
    node.data = data;
  }
  function delete_node(root,id){
	  var node = search_node(root, id);
    if(node == null){
  	  alert('there is no node to delete');
    }
    var p_node = node.parent;
    for(var i = 0; i<p_node.children.length; i ++){
  	  if(p_node.children[i].data.id == id){
    	  break;
      }
    }
    p_node.children.remove(i);
  }
  function render(root){
    createTextBox(root.data.graphic);
    if(root.children.length > 0){
      var graphic = jQuery.extend({}, root.data.graphic)
      graphic.y = root.data.graphic.y + 80;
      for(var i =0; i<root.children.length; i ++){
        graphic.x = root.data.graphic.x - (parseInt((root.children[i].numChild-1)/2) + 0.5) * 120;
        graphic.x += (i) * 120;
        graphic.text = root.children[i].data.name;
        if('graphic' in root.children[i].data){
          graphic.color = root.children[i].data.graphic.color;
        }
        root.children[i].data.graphic = graphic;
        drawline(root.data.graphic.x+root.data.graphic.width/2,
                 root.data.graphic.y+root.data.graphic.height,
                 graphic.x + graphic.width/2,
                 graphic.y);
        render(root.children[i]);
        //createTextBox(root.children[i].data.graphic);
      }
    }
  }
</script>

<script>
  //Get Canvas
  var canvas;
  var context;
  window.onload = function() {
    canvas = document.getElementById("canvas");
    if (canvas == null || canvas.getContext == null) return;
      context = canvas.getContext("2d");

  var tree = create_root();
  tree.data.graphic = {
    x:canvas.width/2, y:0, width:100, height:40,
    color:"lightcoral",
    text:"root", textColor:"white", textSize:16,
    exit:false}

  var data = {id:1,name:'W_edit'};
  add_node(data, tree);
  var data = {id:2,name:'W_order'};
  add_node(data, tree);
  var data = {id:3,name:'W_view'};
  add_node(data, tree);
  var data = {id:4,name:'B_cut_photo'};
  var node = search_node(tree, 1);
  add_node(data, node);
  var data = {id:5,name:'B_blur'};
  var node = search_node(tree, 1);
  add_node(data, node);
  var data = {id:6,name:'B_stretch'};
  var node = search_node(tree, 1);
  add_node(data, node);
  var data = {id:7,name:'B_color'};
  var node = search_node(tree, 3);
  add_node(data, node);
  var data = {id:7,name:'B_people'};
  var node = search_node(tree, 3);
  add_node(data, node);
  render(tree);
  delete_node(tree, 3);
  data = {id:2,name:'Search!', graphic:{color:'lightskyblue'}}
  change_node(tree,2,data);
  tree.data.graphic.y = 300;
  render(tree);
  }
</script>

<head>
	<meta charset="utf-8">
	<title>Tree ADT</title>
</head>
<body>
	<canvas id="canvas" width="800" height="800">

  </canvas>
</body>
